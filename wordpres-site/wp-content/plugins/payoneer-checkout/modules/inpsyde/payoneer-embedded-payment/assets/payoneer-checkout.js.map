{"version":3,"file":"payoneer-checkout.js","mappings":"yBACA,IAAIA,EAAsB,CCA1BA,EAAwB,SAASC,GAChC,IAAIC,EAASD,GAAUA,EAAOE,WAC7B,WAAa,OAAOF,EAAgB,OAAG,EACvC,WAAa,OAAOA,CAAQ,EAE7B,OADAD,EAAoBI,EAAEF,EAAQ,CAAEG,EAAGH,IAC5BA,CACR,ECNAF,EAAwB,SAASM,EAASC,GACzC,IAAI,IAAIC,KAAOD,EACXP,EAAoBS,EAAEF,EAAYC,KAASR,EAAoBS,EAAEH,EAASE,IAC5EE,OAAOC,eAAeL,EAASE,EAAK,CAAEI,YAAY,EAAMC,IAAKN,EAAWC,IAG3E,ECPAR,EAAwB,SAASc,EAAKC,GAAQ,OAAOL,OAAOM,UAAUC,eAAeC,KAAKJ,EAAKC,EAAO,GCAlG,EAA+BI,OAAe,O,SCErCC,EAA2B,WAAM,IAAAC,EAC7C,OAEC,QAFDA,EAAOC,SAASC,cACf,qEACA,IAAAF,OAAA,EAFMA,EAEJG,EACJ,EAEaC,EAA4B,WACxC,MAAO,qCAAqCC,KAC3CN,IAEF,EAEaO,EAAgB,WAC5B,MAA6C,MAAtCR,OAAOS,aAAaD,aAC5B,EAEaE,EAAwB,WACpC,IAAMC,EAAW,gBAAkBV,IACnC,OAAOE,SAASC,cAAeO,EAChC,ECrBA,SAASC,EAAmBC,EAAGC,EAAGC,EAAGC,EAAG1B,EAAGJ,EAAG+B,GAC5C,IACE,IAAIC,EAAIL,EAAE3B,GAAG+B,GACXE,EAAID,EAAEE,KACV,CAAE,MAAOP,GACP,YAAYE,EAAEF,EAChB,CACAK,EAAEG,KAAOP,EAAEK,GAAKG,QAAQC,QAAQJ,GAAGK,KAAKR,EAAG1B,EAC7C,CACA,SAASmC,EAAkBZ,GACzB,OAAO,WACL,IAAIC,EAAIY,KACNX,EAAIY,UACN,OAAO,IAAIL,SAAQ,SAAUN,EAAG1B,GAC9B,IAAIJ,EAAI2B,EAAEe,MAAMd,EAAGC,GACnB,SAASc,EAAMhB,GACbD,EAAmB1B,EAAG8B,EAAG1B,EAAGuC,EAAOC,EAAQ,OAAQjB,EACrD,CACA,SAASiB,EAAOjB,GACdD,EAAmB1B,EAAG8B,EAAG1B,EAAGuC,EAAOC,EAAQ,QAASjB,EACtD,CACAgB,OAAM,EACR,GACF,CACF,CCxBA,SAASE,EAAQzC,GAGf,OAAOyC,EAAU,mBAAqBC,QAAU,iBAAmBA,OAAOC,SAAW,SAAU3C,GAC7F,cAAcA,CAChB,EAAI,SAAUA,GACZ,OAAOA,GAAK,mBAAqB0C,QAAU1C,EAAE4C,cAAgBF,QAAU1C,IAAM0C,OAAOnC,UAAY,gBAAkBP,CACpH,EAAGyC,EAAQzC,EACb,CCNA,SAAS6C,EAAcrB,GACrB,IAAII,ECFN,SAAqBJ,EAAGE,GACtB,GAAI,UAAYe,EAAQjB,KAAOA,EAAG,OAAOA,EACzC,IAAIC,EAAID,EAAEkB,OAAOI,aACjB,QAAI,IAAWrB,EAAG,CAChB,IAAIG,EAAIH,EAAEhB,KAAKe,EAAGE,UAClB,GAAI,UAAYe,EAAQb,GAAI,OAAOA,EACnC,MAAM,IAAImB,UAAU,+CACtB,CACA,OAAyBC,OAAiBxB,EAC5C,CDPUsB,CAAYtB,GACpB,MAAO,UAAYiB,EAAQb,GAAKA,EAAIA,EAAI,EAC1C,CEJA,SAASqB,EAAgBxB,EAAGC,EAAGF,GAC7B,OAAQE,EAAImB,EAAcnB,MAAOD,EAAIxB,OAAOC,eAAeuB,EAAGC,EAAG,CAC/DI,MAAON,EACPrB,YAAY,EACZ+C,cAAc,EACdC,UAAU,IACP1B,EAAEC,GAAKF,EAAGC,CACjB,CCPA,SAAS2B,EAAkB3B,EAAGC,GAC5B,IAAK,IAAIF,EAAI,EAAGA,EAAIE,EAAE2B,OAAQ7B,IAAK,CACjC,IAAIxB,EAAI0B,EAAEF,GACVxB,EAAEG,WAAaH,EAAEG,aAAc,EAAIH,EAAEkD,cAAe,EAAI,UAAWlD,IAAMA,EAAEmD,UAAW,GAAKlD,OAAOC,eAAeuB,EAAGoB,EAAc7C,EAAED,KAAMC,EAC5I,CACF,CCNA,IAAI,EAA+BU,OAA2B,mB,SCC9D,SAAS4C,EAAyB7B,EAAGD,GACnC,GAAI,MAAQC,EAAG,MAAO,CAAC,EACvB,IAAIzB,EACF0B,EACAE,ECLJ,SAAuCF,EAAGD,GACxC,GAAI,MAAQC,EAAG,MAAO,CAAC,EACvB,IAAIF,EAAI,CAAC,EACT,IAAK,IAAID,KAAKG,EAAG,GAAI,CAAC,EAAElB,eAAeC,KAAKiB,EAAGH,GAAI,CACjD,GAAIE,EAAE8B,QAAQhC,IAAM,EAAG,SACvBC,EAAED,GAAKG,EAAEH,EACX,CACA,OAAOC,CACT,CDHQ,CAA6BC,EAAGD,GACtC,GAAIvB,OAAOuD,sBAAuB,CAChC,IAAIjC,EAAItB,OAAOuD,sBAAsB/B,GACrC,IAAKC,EAAI,EAAGA,EAAIH,EAAE8B,OAAQ3B,IAAK1B,EAAIuB,EAAEG,GAAIF,EAAE+B,QAAQvD,IAAM,GAAK,CAAC,EAAEyD,qBAAqBhD,KAAKgB,EAAGzB,KAAO4B,EAAE5B,GAAKyB,EAAEzB,GAChH,CACA,OAAO4B,CACT,CELA,IAsBA,EAhBkB,SAAE8B,GAAY,IAAAC,EAC/B,OAAoB,QAApBA,EAAKjD,OAAOkD,gBAAQ,IAAAD,GAAfA,EAAiBE,YACdnD,OAAOkD,SAASC,YAAaH,GAG9B,IAAI1B,SAAS,SAAEC,EAAS6B,GAC9B,IAZqBC,EAASC,EAYxBC,EAASpD,SAASqD,cAAe,UACvCD,EAAOE,KAbcJ,EAaML,EAAOK,IAZ5B,IAAIK,IAC8B,QAD3BJ,EACbtD,OAAOS,aAAakD,4BAAoB,IAAAL,OAAA,EAAxCA,EAA0CM,QAAS,QAASP,KAY5DE,EAAOM,OAAStC,EAChBgC,EAAOO,QAAUV,EACjBjD,SAAS4D,KAAKC,YAAaT,EAC5B,IAAI/B,MAAM,WACT,OAAOxB,OAAOkD,SAASC,YAAaH,EACrC,GACD,E,klBCxBA,IAAMiB,EAAe,CAAC,EAETC,EAAU,eAAAC,EAAA1C,EAAA2C,IAAAA,MAAG,SAAAC,EAAAC,GAAA,IAAAjB,EAAAkB,EAAAC,EAAAC,EAAA,OAAAL,IAAAA,MAAA,SAAAM,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,OACW,GADDvB,EAAGiB,EAAHjB,IAAKkB,EAAMD,EAANC,OAAWC,EAAO5B,EAAA0B,EAAAO,GACpDJ,EAAW,GAAHK,OAAOzB,EAAG,KAAAyB,OAAMP,GACvBN,EAAanE,eAAgB2E,GAAU,CAAAC,EAAAE,KAAA,eAAAF,EAAAE,KAAA,EACZG,EAAaC,EAAC,CAC9C3B,IAAAA,EACAkB,OAAAA,GACGC,IACD,OAJHP,EAAcQ,GAAUC,EAAAO,KAAA,cAAAP,EAAAQ,OAAA,SAOlBjB,EAAcQ,IAAU,wBAAAC,EAAAS,OAAA,GAAAd,EAAA,KAC/B,gBAXsBe,IAAA,OAAAjB,EAAAvC,MAAA,KAAAD,UAAA,K,8NCFA,IAEjB0D,EAAqB,WAgCzB,ON7BoBtE,EMFrB,SAAAsE,EAAAf,GASI,IARHgB,EAAOhB,EAAPgB,QACAC,EAA+BjB,EAA/BiB,gCACAC,EAAelB,EAAfkB,gBACAC,EAAkBnB,EAAlBmB,mBACAC,EAA2BpB,EAA3BoB,4BACAC,EAA4BrB,EAA5BqB,6BACAC,EAAsBtB,EAAtBsB,uBACAC,EAA0BvB,EAA1BuB,4BCbF,SAAyB3G,EAAG2B,GAC1B,KAAM3B,aAAa2B,GAAI,MAAM,IAAIwB,UAAU,oCAC7C,CDW4ByD,CAAA,KAAAT,GAE1B3D,KAAKqE,gBAAkBT,EAAQlF,cAC9B,sCAEDsB,KAAKsE,oBAAsBtE,KAAKqE,gBAAgBE,aAC/CV,GAED7D,KAAKwE,aAAeZ,EAAQlF,cAAc,IAAD0E,OAAOW,IAChD/D,KAAKyE,mBAAqBb,EAAQlF,cAAc,cAAD0E,OAC/Bc,EAAsB,MAEtClE,KAAK0E,mBAAqBd,EAAQlF,cAAc,cAAD0E,OAC/Be,EAA0B,MAG1CnE,KAAK2E,QACJ3E,KAAK4E,WACJZ,EACAC,EACAH,GAGH,EN7BwBxE,EM6BvB,EAAA3B,IAAA,aAAA+B,MAED,SACCsE,EACAC,EACAY,GAEA,O,+VAAAvB,CAAA,CACC3B,IAAK3B,KAAKwE,aAAaD,aAAcN,GACrCpB,OAAQ7C,KAAKwE,aAAaD,aACzBP,GAEDc,cAAe9E,KAAK+E,WAAWC,KAAMhF,MACrCiF,kBAAmB,CAAEjF,KAAKsE,sBACvBO,EAEL,GAAC,CAAAlH,IAAA,UAAA+B,OAAAwF,EAAAnF,EAAA2C,IAAAA,MAED,SAAAC,EAAeG,GAAO,OAAAJ,IAAAA,MAAA,SAAAM,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cAAAF,EAAAC,KAAA,EAAAD,EAAAE,KAAA,EAEHV,EAAYM,GAAS,OAAtC9C,KAAKmF,IAAGnC,EAAAO,KACRvD,KAAKoF,QAAQpC,EAAAE,KAAA,gBAAAF,EAAAC,KAAA,EAAAD,EAAAqC,GAAArC,EAAA,SAGbsC,QAAQC,MAAKvC,EAAAqC,IAEbrF,KAAKyE,mBAAmBe,gBAAiB,YAAa,yBAAAxC,EAAAS,OAAA,GAAAd,EAAA,kBAEvD,SAAAe,IAAA,OAAAwB,EAAAhF,MAAA,KAAAD,UAAA,KAAAtC,IAAA,SAAA+B,MAED,WACC,IAAOM,KAAKmF,IACX,MAAM,IAAIM,MAAO,+CAGlB,GAAKzF,KAAK0F,QACT,OAAO1F,KAAK0F,QAGb,IACG1F,KAAKmF,IACLQ,4BACAC,KAAK,SAAEC,GAAC,OAAMA,EAAEC,IAAI,IACpBC,SAAU/F,KAAKsE,qBAEjB,MAAM,IAAImB,MACT,sCAAwCzF,KAAKsE,qBAI/C,OAAStE,KAAK0F,QAAU1F,KAAKmF,IAAIa,OAAQhG,KAAKsE,oBAAqB,CAClE2B,mBAAmB,GAErB,GAAC,CAAAtI,IAAA,aAAA+B,MAED,WACC,GAAKZ,IAAkB,CACtB,IAAMoH,EAAM,IAAIlE,IAAKvD,SAAS0H,UAG9B,OAFAD,EAAIE,aAAaC,IAAK/H,OAAOS,aAAauH,mBAAmB,GAC7DhI,OAAO6H,SAASI,KAAOL,EAAIM,YACpB,CACR,CAGA,OAFAxG,KAAK0E,mBAAmBhF,OAAQ,EAChC+G,IAAGhI,SAASiI,MAAOC,QAAS,oBACrB,CACR,GAAC,CAAAhJ,IAAA,QAAA+B,MAED,WACC,IAAMsG,EAAShG,KAAKgG,SACpBhG,KAAKqE,gBAAgBuC,UAAY,GACjC5G,KAAKyE,mBAAmBoC,aAAc,WAAY,YAElDb,EAAOZ,MAAOpF,KAAKqE,gBACpB,GAAC,CAAA1G,IAAA,UAAA+B,MAED,WACCM,KAAKgG,SAASc,SACf,GAAC,CAAAnJ,IAAA,MAAA+B,MAED,WACCM,KAAKgG,SAASe,KACf,IN7GQzH,GAAK0B,EAAkB3B,EAAElB,UAAWmB,GAAkCzB,OAAOC,eAAeuB,EAAG,YAAa,CACjH0B,UAAU,IACR1B,EAHN,IAAsBA,EAAGC,EM6CvB4F,CAiEA,CAjHyB,GAoH3B,IE/GAzG,SAASuI,iBACP,oBACA,WACE,IAAMC,EAAgBR,IAAE,iBAClBS,EAAmBT,IAAE,iBAEvBU,EAAgB,KAiCdC,EAA0B,WAC9BD,GAAiBA,EAAcL,UAC/BlI,KAjCwB,WACxB,IAAMgF,EAAU5E,IAEhB,GAAK4E,EAAL,CAIA,IAAAyD,EAQI/I,OAAOS,aAPT8E,EAA+BwD,EAA/BxD,gCACAE,EAAkBsD,EAAlBtD,mBACAC,EAA2BqD,EAA3BrD,4BACAC,EAA4BoD,EAA5BpD,6BACAC,EAAsBmD,EAAtBnD,uBACAC,EAA0BkD,EAA1BlD,2BACcmD,EAAMD,EAApBE,aAGFJ,EAAgB,IAAIxD,EAAsB,CACxCC,QAAAA,EACAC,gCAAAA,EACAE,mBAAAA,EACAC,4BAAAA,EACAC,6BAAAA,EACAC,uBAAAA,EACAC,2BAAAA,EACAL,gBAAiB,CACfwD,OAAAA,IArBJ,CAwBF,CAIiCE,EACjC,EAEMC,EAAe,WACnBN,GAAiBA,EAAcJ,KACjC,EAMAN,IAAEhI,SAASiI,MAAMgB,GAAG,2CAA4CN,GAEhEH,EAAcS,GAAG,gCAAgC,SAACrI,EAAGsI,GACnD,GAAK/I,IAyBL,OArBA6I,IAGAE,EAAOC,SAAW,qBAWlBC,YAAW,WACTZ,EAAca,YAAY,cAAcC,UACxCtB,IAAAA,kBACEA,IAAEzH,KAEN,GAAG,OAEI,CACT,IAEAkI,EAAiBQ,GAAG,UAAU,SAACrI,GdrEE,IAAE2I,EcsE5BpJ,MAILS,EAAE4I,iBACF5I,EAAE6I,4Bd3E+BF,Ec6EXd,Ed3E3Bc,EAAMG,MAAO,CACZC,QAAS,KACTC,WAAY,CACXC,WAAY,OACZC,QAAS,MAIJ9B,IAAAA,KAAQ,CACd+B,KAAM,OACNtC,IAAK5H,OAAOmK,mBAAmBC,SAC/BC,UAAW,CAEVC,iBAAiB,GAElBC,SAAU,OACVC,KAAM,CACLC,OAAQ,qBACRC,OAAQhB,EAAMiB,YACdC,OAAQ,IAAIlH,IAAKvD,SAAS0H,UAAWC,aAAaI,cAEhD2C,QAAQ,kBAAMnB,EAAMD,SAAS,KcuDzBjI,MAAK,kBAAM2H,GAAc,IACzB2B,OAAM,WAIL9K,OAAO6H,SAASkD,QAClB,IACJ,IAMIvK,MACFsI,IACAX,IAAE,gCAAgCiB,GAAG,SAAUN,GAEnD,IACA,E","sources":["webpack://payoneer-embedded-payment/webpack/bootstrap","webpack://payoneer-embedded-payment/webpack/runtime/compat get default export","webpack://payoneer-embedded-payment/webpack/runtime/define property getters","webpack://payoneer-embedded-payment/webpack/runtime/hasOwnProperty shorthand","webpack://payoneer-embedded-payment/external window \"jQuery\"","webpack://payoneer-embedded-payment/./resources/js/src/util/woocommerce.js","webpack://payoneer-embedded-payment/./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js","webpack://payoneer-embedded-payment/./node_modules/@babel/runtime/helpers/esm/typeof.js","webpack://payoneer-embedded-payment/./node_modules/@babel/runtime/helpers/esm/toPropertyKey.js","webpack://payoneer-embedded-payment/./node_modules/@babel/runtime/helpers/esm/toPrimitive.js","webpack://payoneer-embedded-payment/./node_modules/@babel/runtime/helpers/esm/defineProperty.js","webpack://payoneer-embedded-payment/./node_modules/@babel/runtime/helpers/esm/createClass.js","webpack://payoneer-embedded-payment/external window \"regeneratorRuntime\"","webpack://payoneer-embedded-payment/./node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js","webpack://payoneer-embedded-payment/./node_modules/@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js","webpack://payoneer-embedded-payment/./resources/js/src/util/sdk/umdLoader.js","webpack://payoneer-embedded-payment/./resources/js/src/util/sdk.js","webpack://payoneer-embedded-payment/./resources/js/src/PayoneerPaymentFields.js","webpack://payoneer-embedded-payment/./node_modules/@babel/runtime/helpers/esm/classCallCheck.js","webpack://payoneer-embedded-payment/./resources/js/payoneer-checkout.js"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","var __WEBPACK_NAMESPACE_OBJECT__ = window[\"jQuery\"];","import $ from 'jquery';\n\nexport const selectedPaymentGatewayId = () => {\n\treturn document.querySelector(\n\t\t'.woocommerce-checkout input[name=\"payment_method\"]:checked'\n\t)?.id;\n};\n\nexport const isPayoneerGatewaySelected = () => {\n\treturn /^payment_method_payoneer-checkout/i.test(\n\t\tselectedPaymentGatewayId()\n\t);\n};\n\nexport const isPayForOrder = () => {\n\treturn window.PayoneerData.isPayForOrder === '1';\n};\n\nexport const getSelectedPaymentBox = () => {\n\tconst selector = '.payment_box.' + selectedPaymentGatewayId();\n\treturn document.querySelector( selector );\n};\n\nexport const submitOrderPayViaAjax = ( $form ) => {\n\t//Blocks the UI in the same way Woocommerce does (source: https://github.com/woocommerce/woocommerce/blob/6.0.1/plugins/woocommerce/assets/js/frontend/checkout.js#L454-L466)\n\t$form.block( {\n\t\tmessage: null,\n\t\toverlayCSS: {\n\t\t\tbackground: '#fff',\n\t\t\topacity: 0.6,\n\t\t},\n\t} );\n\n\treturn $.ajax( {\n\t\ttype: 'POST',\n\t\turl: window.wc_checkout_params.ajax_url,\n\t\txhrFields: {\n\t\t\t// This is important. We need the session cookie to access the LIST in the back-end\n\t\t\twithCredentials: true,\n\t\t},\n\t\tdataType: 'json',\n\t\tdata: {\n\t\t\taction: 'payoneer_order_pay',\n\t\t\tfields: $form.serialize(),\n\t\t\tparams: new URL( document.location ).searchParams.toString(),\n\t\t},\n\t} ).always( () => $form.unblock() );\n};\n","function asyncGeneratorStep(n, t, e, r, o, a, c) {\n  try {\n    var i = n[a](c),\n      u = i.value;\n  } catch (n) {\n    return void e(n);\n  }\n  i.done ? t(u) : Promise.resolve(u).then(r, o);\n}\nfunction _asyncToGenerator(n) {\n  return function () {\n    var t = this,\n      e = arguments;\n    return new Promise(function (r, o) {\n      var a = n.apply(t, e);\n      function _next(n) {\n        asyncGeneratorStep(a, r, o, _next, _throw, \"next\", n);\n      }\n      function _throw(n) {\n        asyncGeneratorStep(a, r, o, _next, _throw, \"throw\", n);\n      }\n      _next(void 0);\n    });\n  };\n}\nexport { _asyncToGenerator as default };","function _typeof(o) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) {\n    return typeof o;\n  } : function (o) {\n    return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o;\n  }, _typeof(o);\n}\nexport { _typeof as default };","import _typeof from \"./typeof.js\";\nimport toPrimitive from \"./toPrimitive.js\";\nfunction toPropertyKey(t) {\n  var i = toPrimitive(t, \"string\");\n  return \"symbol\" == _typeof(i) ? i : i + \"\";\n}\nexport { toPropertyKey as default };","import _typeof from \"./typeof.js\";\nfunction toPrimitive(t, r) {\n  if (\"object\" != _typeof(t) || !t) return t;\n  var e = t[Symbol.toPrimitive];\n  if (void 0 !== e) {\n    var i = e.call(t, r || \"default\");\n    if (\"object\" != _typeof(i)) return i;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (\"string\" === r ? String : Number)(t);\n}\nexport { toPrimitive as default };","import toPropertyKey from \"./toPropertyKey.js\";\nfunction _defineProperty(e, r, t) {\n  return (r = toPropertyKey(r)) in e ? Object.defineProperty(e, r, {\n    value: t,\n    enumerable: !0,\n    configurable: !0,\n    writable: !0\n  }) : e[r] = t, e;\n}\nexport { _defineProperty as default };","import toPropertyKey from \"./toPropertyKey.js\";\nfunction _defineProperties(e, r) {\n  for (var t = 0; t < r.length; t++) {\n    var o = r[t];\n    o.enumerable = o.enumerable || !1, o.configurable = !0, \"value\" in o && (o.writable = !0), Object.defineProperty(e, toPropertyKey(o.key), o);\n  }\n}\nfunction _createClass(e, r, t) {\n  return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, \"prototype\", {\n    writable: !1\n  }), e;\n}\nexport { _createClass as default };","var __WEBPACK_NAMESPACE_OBJECT__ = window[\"regeneratorRuntime\"];","import objectWithoutPropertiesLoose from \"./objectWithoutPropertiesLoose.js\";\nfunction _objectWithoutProperties(e, t) {\n  if (null == e) return {};\n  var o,\n    r,\n    i = objectWithoutPropertiesLoose(e, t);\n  if (Object.getOwnPropertySymbols) {\n    var n = Object.getOwnPropertySymbols(e);\n    for (r = 0; r < n.length; r++) o = n[r], t.indexOf(o) >= 0 || {}.propertyIsEnumerable.call(e, o) && (i[o] = e[o]);\n  }\n  return i;\n}\nexport { _objectWithoutProperties as default };","function _objectWithoutPropertiesLoose(r, e) {\n  if (null == r) return {};\n  var t = {};\n  for (var n in r) if ({}.hasOwnProperty.call(r, n)) {\n    if (e.indexOf(n) >= 0) continue;\n    t[n] = r[n];\n  }\n  return t;\n}\nexport { _objectWithoutPropertiesLoose as default };","/*\n * Since the WebSDK is not yet available on npm, we asynchronously\n * load the UMD version from the appropriate env whenever the SDK is initialized\n * for the first time.\n */\n\nconst formatUmdUrl = ( env ) => {\n\treturn new URL(\n\t\twindow.PayoneerData.webSdkUmdUrlTemplate?.replace( '<env>', env )\n\t);\n};\n\nconst sdkLoader = ( config ) => {\n\tif ( window.Payoneer?.CheckoutWeb ) {\n\t\treturn window.Payoneer.CheckoutWeb( config );\n\t}\n\n\treturn new Promise( ( resolve, reject ) => {\n\t\tconst script = document.createElement( 'script' );\n\t\tscript.src = formatUmdUrl( config.env );\n\t\tscript.onload = resolve;\n\t\tscript.onerror = reject;\n\t\tdocument.head.appendChild( script );\n\t} ).then( () => {\n\t\treturn window.Payoneer.CheckoutWeb( config );\n\t} );\n};\n\nexport default sdkLoader;\n","import initializeSdk from './sdk/umdLoader';\n\nconst sdkInstances = {};\n\nexport const sdkFactory = async ( { env, longId, ...options } ) => {\n\tconst sdkIndex = `${ env }-${ longId }`;\n\tif ( ! sdkInstances.hasOwnProperty( sdkIndex ) ) {\n\t\tsdkInstances[ sdkIndex ] = await initializeSdk( {\n\t\t\tenv,\n\t\t\tlongId,\n\t\t\t...options,\n\t\t} );\n\t}\n\n\treturn sdkInstances[ sdkIndex ];\n};\n","import { sdkFactory } from './util/sdk';\nimport { isPayForOrder } from './util/woocommerce';\nimport $ from 'jquery';\n\nclass PayoneerPaymentFields {\n\tconstructor( {\n\t\telement,\n\t\tpaymentFieldsComponentAttribute,\n\t\textraSdkOptions,\n\t\tlistUrlContainerId,\n\t\tlistUrlContainerIdAttribute,\n\t\tlistUrlContainerEnvAttribute,\n\t\thostedModeOverrideFlag,\n\t\tonErrorRefreshFragmentFlag,\n\t} ) {\n\t\tthis.dropInContainer = element.querySelector(\n\t\t\t'.payoneer-payment-fields-container'\n\t\t);\n\t\tthis.dropInComponentName = this.dropInContainer.getAttribute(\n\t\t\tpaymentFieldsComponentAttribute\n\t\t);\n\t\tthis.listUrlInput = element.querySelector( `.${ listUrlContainerId }` );\n\t\tthis.hostedModeOverride = element.querySelector(\n\t\t\t`input[name=${ hostedModeOverrideFlag }]`\n\t\t);\n\t\tthis.onErrorRefreshFlag = element.querySelector(\n\t\t\t`input[name=${ onErrorRefreshFragmentFlag }]`\n\t\t);\n\n\t\tthis.initSdk(\n\t\t\tthis.sdkOptions(\n\t\t\t\tlistUrlContainerIdAttribute,\n\t\t\t\tlistUrlContainerEnvAttribute,\n\t\t\t\textraSdkOptions\n\t\t\t)\n\t\t);\n\t}\n\n\tsdkOptions(\n\t\tlistUrlContainerIdAttribute,\n\t\tlistUrlContainerEnvAttribute,\n\t\textraOptions\n\t) {\n\t\treturn {\n\t\t\tenv: this.listUrlInput.getAttribute( listUrlContainerEnvAttribute ),\n\t\t\tlongId: this.listUrlInput.getAttribute(\n\t\t\t\tlistUrlContainerIdAttribute\n\t\t\t),\n\t\t\tonBeforeError: this.onSdkError.bind( this ),\n\t\t\tpreloadComponents: [ this.dropInComponentName ],\n\t\t\t...extraOptions,\n\t\t};\n\t}\n\n\tasync initSdk( options ) {\n\t\ttry {\n\t\t\tthis.sdk = await sdkFactory( options );\n\t\t\tthis.mount();\n\t\t} catch ( e ) {\n\t\t\t// eslint-disable-next-line no-console\n\t\t\tconsole.error( e );\n\t\t\t//Re-enable hosted mode override if it was disabled before.\n\t\t\tthis.hostedModeOverride.removeAttribute( 'disabled' );\n\t\t}\n\t}\n\n\tdropIn() {\n\t\tif ( ! this.sdk ) {\n\t\t\tthrow new Error( 'dropIn() called before SDK was initialized.' );\n\t\t}\n\n\t\tif ( this._dropIn ) {\n\t\t\treturn this._dropIn;\n\t\t}\n\n\t\tif (\n\t\t\t! this.sdk\n\t\t\t\t.availableDropInComponents()\n\t\t\t\t.map( ( v ) => v.name )\n\t\t\t\t.includes( this.dropInComponentName )\n\t\t) {\n\t\t\tthrow new Error(\n\t\t\t\t'Invalid dropIn component provided: ' + this.dropInComponentName\n\t\t\t);\n\t\t}\n\n\t\treturn ( this._dropIn = this.sdk.dropIn( this.dropInComponentName, {\n\t\t\thidePaymentButton: true,\n\t\t} ) );\n\t}\n\n\tonSdkError() {\n\t\tif ( isPayForOrder() ) {\n\t\t\tconst url = new URL( document.location );\n\t\t\turl.searchParams.set( window.PayoneerData.payOrderErrorFlag, true );\n\t\t\twindow.location.href = url.toString();\n\t\t\treturn false;\n\t\t}\n\t\tthis.onErrorRefreshFlag.value = true;\n\t\t$( document.body ).trigger( 'update_checkout' );\n\t\treturn false;\n\t}\n\n\tmount() {\n\t\tconst dropIn = this.dropIn();\n\t\tthis.dropInContainer.innerHTML = '';\n\t\tthis.hostedModeOverride.setAttribute( 'disabled', 'disabled' );\n\n\t\tdropIn.mount( this.dropInContainer );\n\t}\n\n\tunmount() {\n\t\tthis.dropIn().unmount();\n\t}\n\n\tpay() {\n\t\tthis.dropIn().pay();\n\t}\n}\n\nexport default PayoneerPaymentFields;\n","function _classCallCheck(a, n) {\n  if (!(a instanceof n)) throw new TypeError(\"Cannot call a class as a function\");\n}\nexport { _classCallCheck as default };","import $ from 'jquery';\nimport {\n  getSelectedPaymentBox,\n  isPayForOrder,\n  isPayoneerGatewaySelected,\n  submitOrderPayViaAjax\n} from './src/util/woocommerce';\nimport PayoneerPaymentFields from './src/PayoneerPaymentFields';\n\ndocument.addEventListener(\n  'DOMContentLoaded',\n  function () {\n    const $checkoutForm = $('form.checkout');\n    const $orderReviewForm = $('#order_review');\n\n    let paymentFields = null;\n\n    const initPaymentFields = () => {\n      const element = getSelectedPaymentBox();\n\n      if (!element) {\n        return;\n      }\n\n      const {\n        paymentFieldsComponentAttribute,\n        listUrlContainerId,\n        listUrlContainerIdAttribute,\n        listUrlContainerEnvAttribute,\n        hostedModeOverrideFlag,\n        onErrorRefreshFragmentFlag,\n        websdkStyles: styles\n      } = window.PayoneerData;\n\n      paymentFields = new PayoneerPaymentFields({\n        element,\n        paymentFieldsComponentAttribute,\n        listUrlContainerId,\n        listUrlContainerIdAttribute,\n        listUrlContainerEnvAttribute,\n        hostedModeOverrideFlag,\n        onErrorRefreshFragmentFlag,\n        extraSdkOptions: {\n          styles\n        },\n      });\n    };\n\n    const onPaymentMethodSelected = () => {\n      paymentFields && paymentFields.unmount();\n      isPayoneerGatewaySelected() && initPaymentFields();\n    };\n\n    const startPayment = () => {\n      paymentFields && paymentFields.pay();\n    };\n\n    /**\n     * Cannot use native event listener for events dispatched by jQuery\n     * https://github.com/jquery/jquery/issues/3347\n     */\n    $(document.body).on('payment_method_selected updated_checkout', onPaymentMethodSelected);\n\n    $checkoutForm.on('checkout_place_order_success', (e, result) => {\n      if (!isPayoneerGatewaySelected()) {\n        return;\n      }\n\n      startPayment();\n\n      //Override default redirect to hosted payment page\n      result.redirect = '#payoneer-redirect';\n\n      /**\n       * Create a timeout that races the SDK's payment handling.\n       * If the handling is not done after 1,5 second, it unblocks\n       * the checkout form and scrolls the users to the payment fields\n       * because probably there is an error displayed there\n       *\n       * This is done since the SDK does not have any validation callback\n       * or Promise we could attach to.\n       */\n      setTimeout(() => {\n        $checkoutForm.removeClass('processing').unblock();\n        $.scroll_to_notices(\n          $(getSelectedPaymentBox())\n        );\n      }, 1500);\n\n      return true;\n    });\n\n    $orderReviewForm.on('submit', (e) => {\n      if (!isPayoneerGatewaySelected()) {\n        return;\n      }\n\n      e.preventDefault();\n      e.stopImmediatePropagation();\n\n      submitOrderPayViaAjax($orderReviewForm)\n        .then(() => startPayment())\n        .catch(() => {\n          /**\n           * Reloading enables us to see error messages added via wc_add_notice()\n           */\n          window.location.reload();\n        });\n    });\n\n    /**\n     * No fragment update on 'order-pay'. So we manually initialize our widget\n     * and listen to the native JS change event for the radio button\n     */\n    if (isPayForOrder()) {\n      onPaymentMethodSelected();\n      $('input[name=\"payment_method\"]').on('change', onPaymentMethodSelected);\n    }\n  },\n  false,\n);\n"],"names":["__webpack_require__","module","getter","__esModule","d","a","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","window","selectedPaymentGatewayId","_document$querySelect","document","querySelector","id","isPayoneerGatewaySelected","test","isPayForOrder","PayoneerData","getSelectedPaymentBox","selector","asyncGeneratorStep","n","t","e","r","c","i","u","value","done","Promise","resolve","then","_asyncToGenerator","this","arguments","apply","_next","_throw","_typeof","Symbol","iterator","constructor","toPropertyKey","toPrimitive","TypeError","String","_defineProperty","configurable","writable","_defineProperties","length","_objectWithoutProperties","indexOf","getOwnPropertySymbols","propertyIsEnumerable","config","_window$Payoneer","Payoneer","CheckoutWeb","reject","env","_window$PayoneerData$","script","createElement","src","URL","webSdkUmdUrlTemplate","replace","onload","onerror","head","appendChild","sdkInstances","sdkFactory","_ref2","_regeneratorRuntime","_callee","_ref","longId","options","sdkIndex","_context","prev","next","_excluded","concat","initializeSdk","_objectSpread","sent","abrupt","stop","_x","PayoneerPaymentFields","element","paymentFieldsComponentAttribute","extraSdkOptions","listUrlContainerId","listUrlContainerIdAttribute","listUrlContainerEnvAttribute","hostedModeOverrideFlag","onErrorRefreshFragmentFlag","_classCallCheck","dropInContainer","dropInComponentName","getAttribute","listUrlInput","hostedModeOverride","onErrorRefreshFlag","initSdk","sdkOptions","extraOptions","onBeforeError","onSdkError","bind","preloadComponents","_initSdk","sdk","mount","t0","console","error","removeAttribute","Error","_dropIn","availableDropInComponents","map","v","name","includes","dropIn","hidePaymentButton","url","location","searchParams","set","payOrderErrorFlag","href","toString","$","body","trigger","innerHTML","setAttribute","unmount","pay","addEventListener","$checkoutForm","$orderReviewForm","paymentFields","onPaymentMethodSelected","_window$PayoneerData","styles","websdkStyles","initPaymentFields","startPayment","on","result","redirect","setTimeout","removeClass","unblock","$form","preventDefault","stopImmediatePropagation","block","message","overlayCSS","background","opacity","type","wc_checkout_params","ajax_url","xhrFields","withCredentials","dataType","data","action","fields","serialize","params","always","catch","reload"],"sourceRoot":""}